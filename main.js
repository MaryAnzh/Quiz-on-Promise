(()=>{"use strict";class t{constructor(){this.keys=["toDo","Done"]}setData(t,e){e?localStorage.setItem(t,JSON.stringify(e)):localStorage.removeItem(t)}getData(t){const e=localStorage.getItem(t);return e?JSON.parse(e):null}getAllKeys(){return this.keys.map((t=>({name:t,data:this.getData(t)})))}}class e{constructor(e,i){this._localStorge=new t,this.item=document.createElement("li"),this.itemData=e,this.item.textContent=this.itemData.content,this.onClick=t=>this.changeItemsPerentOnCkick(t),this.updatePerent=i,this.item.addEventListener("click",this.onClick)}changeItemsPerentOnCkick(t){this.item.classList.add("out"),setTimeout((()=>{this.destroy(),this.updatePerent(this.itemData)}),310)}destroy(){this.item.removeEventListener("click",this.onClick),this.item.remove()}}class i{constructor(e,i,s){this.localStorage=new t,this.wrapper=document.createElement("div"),this.wrapper.classList.add("list-wrap"),this.listName=i,this.title=document.createElement("h3"),this.title.textContent=i,this.list=document.createElement("ul"),this.list.classList.add("list-wrap__list"),this.wrapper.append(this.title,this.list),e.append(this.wrapper),this.todoData=this.localStorage.getData(i),this.updateItemsInMain=s,this.createtodoList()}createtodoList(){this.todoData&&this.todoData.forEach((t=>{const i=new e(t,this.updateListInfoInPerent.bind(this));this.list.append(i.item)}))}addItemInList(t){const i={content:t.content,id:t.id,perentList:this.listName},s=new e(i,this.updateListInfoInPerent.bind(this));s.item.classList.add("in"),this.list.append(s.item),setTimeout((()=>s.item.classList.remove("in")),350)}updateListInfoInPerent(t){console.log(`Строка ${t.content} удалена из списка`),this.updateItemsInMain(t)}}const s=[{content:"shopping",id:0,perentList:"toDo"},{content:"visit to petsvet",id:1,perentList:"toDo"},{content:"visit to the doctor",id:2,perentList:"toDo"}],n=[{content:"going to the cinema",id:3,perentList:"Done"},{content:"omething else",id:4,perentList:"Done"}];(()=>{const e=new t;e.setData("toDo",s),e.setData("Done",n)})();class o{constructor(){this.toDoTitle="toDo",this.doneTitle="Done",this._localStorge=new t,this.body=document.querySelector("body"),this.main=document.createElement("main"),this.main.classList.add("page"),this.wrapper=document.createElement("div"),this.wrapper.classList.add("wrapper"),this.body.append(this.wrapper),this.wrapper.append(this.main),this.toDoList=new i(this.main,this.toDoTitle,this.updateItemsInList.bind(this)),this.doneList=new i(this.main,this.doneTitle,this.updateItemsInList.bind(this))}updateItemsInList(t){const e=t.perentList,i=this.changePerent(e),s=this._localStorge.getData(e).filter((e=>e.id!==t.id));this._localStorge.setData(e,s),t.perentList=i;const n=this._localStorge.getData(i);n.push(t),this._localStorge.setData(i,n),"toDo"==e&&this.doneList.addItemInList(t),"Done"===e&&this.toDoList.addItemInList(t)}changePerent(t){return"toDo"===t?"Done":"toDo"}}window.addEventListener("load",(()=>new o))})();
//# sourceMappingURL=main.js.map