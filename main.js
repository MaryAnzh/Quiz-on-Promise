(()=>{"use strict";class e{constructor(e){this.form=e,this.input=this.form.elements.namedItem("number")}getInputValue(){return this.input.valueAsNumber}setInputValue(e){this.input.valueAsNumber=e}generateInputEvrnt(){const e=new Event("input");this.input.dispatchEvent(e)}}class t{constructor(){this.formServ=null,this.form=null,this.buttons=null,this.isPrevButtonBlock=!0}render(){return Promise.resolve('\n        <form class="number-form">\n          <labe class="number-form__title"l>Введите число</label>\n          <dov class="number-form__input-block">\n            <button class="number-form__input-block__button blocked" data-type="prev">-</button>\n            <input\n              name="number"\n              type="number"\n              class="number-form__input-block__field"\n              value="0"\n              />\n            <button class="number-form__input-block__button" data-type="next">+</button>\n          </div>\n        </form>\n        ')}after_render(){return this.form=document.querySelector(".number-form"),this.buttons=document.querySelectorAll(".number-form__input-block__button"),this.formServ=new e(this.form),this.buttons.forEach((e=>e.addEventListener("click",(e=>this.changeValueOnClick(e))))),Promise.resolve()}changeValueOnClick(e){e.preventDefault();const t=e.target,n=t.dataset.type;let r=+this.formServ.getInputValue();if(Number.isNaN(r)&&(r=0),n){if("prev"===n){const e=r-1;e>0&&this.formServ.setInputValue(e),0===e&&(t.classList.add("blocked"),this.isPrevButtonBlock=!0)}if("next"===n){const e=r+1;this.formServ.setInputValue(e),this.isPrevButtonBlock&&(this.isPrevButtonBlock=!1,this.buttons.forEach((e=>e.classList.remove("blocked"))))}}this.formServ.generateInputEvrnt()}}const n=new class{constructor(){this.formServ=null,this.numberForm=new t,this.formWrap=null,this.form=null,this.numberInput=null,this.inputView=null}render(){return Promise.resolve('\n    <div class="main-wrapper">\n      <h2 class="main-wrapper__title">Free Task</h2>\n      <section class="main-wrapper__form-view"></section>\n      <section class="main-wrapper__form-result">\n        <h4 class="main-wrapper__form-result__title">Вы ввели число:</h4>\n        <div class="main-wrapper__form-result__result-view"></div>\n      </section>\n    </div>\n    ')}after_render(){return t=this,n=void 0,o=function*(){return this.formWrap=document.querySelector(".main-wrapper__form-view"),this.formWrap.innerHTML=yield this.numberForm.render(),this.form=document.querySelector(".number-form"),this.numberInput=document.querySelector(".number-form__input-block__field"),this.inputView=document.querySelector(".main-wrapper__form-result__result-view"),this.formServ=new e(this.form),this.numberInput.addEventListener("input",(e=>this.listenInputVslue(e))),yield this.numberForm.after_render(),Promise.resolve()},new((r=void 0)||(r=Promise))((function(e,s){function i(e){try{l(o.next(e))}catch(e){s(e)}}function u(e){try{l(o.throw(e))}catch(e){s(e)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(i,u)}l((o=o.apply(t,n||[])).next())}));var t,n,r,o}listenInputVslue(e){console.log("input");const t=e.target.value;this.inputView.textContent=t}};window.addEventListener("load",(()=>{return e=void 0,t=void 0,o=function*(){const e=document.querySelector("body"),t=document.createElement("main");t.classList.add("page");const r=document.createElement("div");r.classList.add("wrapper"),e.append(r),r.append(t),t.innerHTML=yield n.render(),yield n.after_render()},new((r=void 0)||(r=Promise))((function(n,s){function i(e){try{l(o.next(e))}catch(e){s(e)}}function u(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,u)}l((o=o.apply(e,t||[])).next())}));var e,t,r,o}))})();
//# sourceMappingURL=main.js.map