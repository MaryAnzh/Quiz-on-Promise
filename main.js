(()=>{"use strict";class t{constructor(){this.keys=["toDo","Done"]}setData(t,e){e?localStorage.setItem(t,JSON.stringify(e)):localStorage.removeItem(t)}getData(t){const e=localStorage.getItem(t);return e?JSON.parse(e):null}getAllKeys(){return this.keys.map((t=>({name:t,data:this.getData(t)})))}}class e{constructor(e,i){this._localStorge=new t,this.item=document.createElement("li"),this.itemData=e,this.item.textContent=this.itemData.content,this.onClick=t=>this.changeItemsPerentOnCkick(t),this.updatePerent=i,this.item.addEventListener("click",this.onClick)}changeItemsPerentOnCkick(t){this.destroy(),this.updatePerent(this.itemData)}destroy(){this.item.removeEventListener("click",this.onClick),this.item.remove()}}class i{constructor(e,i,s){this.localStorage=new t,this.wrapper=document.createElement("div"),this.wrapper.classList.add("list-wrap"),this.listName=i,this.title=document.createElement("h3"),this.title.textContent=i,this.list=document.createElement("ul"),this.list.classList.add("list-wrap__list"),this.wrapper.append(this.title,this.list),e.append(this.wrapper),this.todoData=this.localStorage.getData(i),this.updateItemsInMain=s,this.createtodoList()}createtodoList(){this.todoData&&this.todoData.forEach((t=>{const i=new e(t,this.updateListInfoInPerent.bind(this));this.list.append(i.item)}))}addItemInList(t){const i={content:t.content,id:t.id,perentList:this.listName},s=new e(i,this.updateListInfoInPerent.bind(this));this.list.append(s.item)}updateListInfoInPerent(t){console.log(`Строка ${t.content} удалена из списка`),this.updateItemsInMain(t)}}const s=[{content:"shopping",id:0,perentList:"toDo"},{content:"visit to petsvet",id:1,perentList:"toDo"},{content:"visit to the doctor",id:2,perentList:"toDo"}],o=[{content:"going to the cinema",id:3,perentList:"Done"},{content:"omething else",id:4,perentList:"Done"}];(()=>{const e=new t;e.setData("toDo",s),e.setData("Done",o)})();class n{constructor(){this.toDoTitle="toDo",this.doneTitle="Done",this._localStorge=new t,this.body=document.querySelector("body"),this.main=document.createElement("main"),this.main.classList.add("page"),this.wrapper=document.createElement("div"),this.wrapper.classList.add("wrapper"),this.body.append(this.wrapper),this.wrapper.append(this.main),this.toDoList=new i(this.main,this.toDoTitle,this.updateItemsInList.bind(this)),this.doneList=new i(this.main,this.doneTitle,this.updateItemsInList.bind(this))}updateItemsInList(t){console.log(`Обновить ${t.perentList}, строку ${t.content}`);const e=t.perentList,i=this._localStorge.getData(t.perentList).filter((e=>e.id!==t.id));if(this._localStorge.setData(t.perentList,i),"toDo"==e){t.perentList="Done";const e=this._localStorge.getData("Done");e.push(t),this._localStorge.setData("Done",e),this.doneList.addItemInList(t)}if("Done"===e){t.perentList="toDo";const e=this._localStorge.getData("toDo");e.push(t),this._localStorge.setData("toDo",e),this.toDoList.addItemInList(t)}console.log(this._localStorge.getAllKeys())}}window.addEventListener("load",(()=>new n))})();
//# sourceMappingURL=main.js.map