{"version":3,"file":"main.js","mappings":"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","sources":["webpack://free-task/./src/service/localStorage.ts","webpack://free-task/./src/model/todo-item/todo-item.ts","webpack://free-task/./src/model/todo-list/todo-list.ts","webpack://free-task/./src/data/lists-data.ts","webpack://free-task/./src/index.ts"],"sourcesContent":["import { IItemData } from '../data/data-item-intarface';\r\nimport { ILocalStorgeKey } from '../data/localstorge-key-interface';\r\n\r\nclass LocalStorageService {\r\n    public keys: string[] = ['toDo', 'Done'];\r\n\r\n    constructor() { }\r\n\r\n    setData(key: string, value: IItemData[]): void {\r\n        if (value) {\r\n            localStorage.setItem(\r\n                key, JSON.stringify(value)\r\n            );\r\n        } else {\r\n            localStorage.removeItem(key);\r\n        }\r\n    }\r\n\r\n    getData(key: string): IItemData[] | null {\r\n        const data = localStorage.getItem(key);\r\n        return data\r\n            ? JSON.parse(data) :\r\n            null;\r\n    }\r\n\r\n    getAllKeys(): ILocalStorgeKey[] {\r\n        return this.keys.map(key => {\r\n            const listInfo: ILocalStorgeKey = {\r\n                name: key,\r\n                data: this.getData(key),\r\n            }\r\n            return listInfo;\r\n        });\r\n    }\r\n}\r\n\r\nexport { LocalStorageService }\r\n    ;","import { LocalStorageService } from '../../service/localStorage';\r\nimport { IItemData } from '../../data/data-item-intarface';\r\nimport { ILocalStorgeKey } from '../../data/localstorge-key-interface';\r\n\r\nclass TodoItem {\r\n    public item: HTMLLIElement;\r\n    public itemData: IItemData;\r\n    public onClick: (e: Event) => void;\r\n    public updatePerent: Function;\r\n\r\n    private _localStorge = new LocalStorageService();\r\n\r\n    constructor(data: IItemData, updatePerentList: Function) {\r\n        this.item = document.createElement('li');\r\n        this.itemData = data;\r\n        this.item.textContent = this.itemData.content;\r\n        this.onClick = (e) => this.changeItemsPerentOnCkick(e);\r\n        this.updatePerent = updatePerentList;\r\n\r\n        this.item.addEventListener('click', this.onClick);\r\n    }\r\n\r\n    changeItemsPerentOnCkick(e: Event) {\r\n        this.item.classList.add('out');\r\n        setTimeout(() => {\r\n            this.destroy();\r\n            this.updatePerent(this.itemData);\r\n        }, 310);\r\n\r\n    }\r\n\r\n    destroy() {\r\n        this.item.removeEventListener('click', this.onClick);\r\n        this.item.remove();\r\n    }\r\n}\r\n\r\nexport { TodoItem }","import { LocalStorageService } from '../../service/localStorage';\r\nimport { TodoItem } from '../todo-item/todo-item';\r\nimport { IItemData } from '../../data/data-item-intarface';\r\n\r\nclass TodoList {\r\n    public wrapper: HTMLDivElement;\r\n    public title: HTMLHeadingElement;\r\n    public list: HTMLUListElement;\r\n\r\n    public listName: string;\r\n\r\n    public todoData: IItemData[];\r\n    public updateItemsInMain: Function;\r\n\r\n    public localStorage = new LocalStorageService();\r\n\r\n    constructor(perentNode: HTMLElement, listName: string, updateItemsBind: Function) {\r\n        this.wrapper = document.createElement('div');\r\n        this.wrapper.classList.add('list-wrap');\r\n        this.listName = listName;\r\n        this.title = document.createElement('h3');\r\n        this.title.textContent = listName;\r\n        this.list = document.createElement('ul');\r\n        this.list.classList.add('list-wrap__list');\r\n        this.wrapper.append(this.title, this.list);\r\n        perentNode.append(this.wrapper);\r\n\r\n        this.todoData = this.localStorage.getData(listName);\r\n        this.updateItemsInMain = updateItemsBind;\r\n\r\n        this.createtodoList();\r\n    }\r\n\r\n    createtodoList(): void {\r\n        if (this.todoData) {\r\n            this.todoData.forEach((elData) => {\r\n                const itemComponent = new TodoItem(elData, this.updateListInfoInPerent.bind(this));\r\n                this.list.append(itemComponent.item);\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    addItemInList(data: IItemData): void {\r\n        const itemData: IItemData = {\r\n            content: data.content,\r\n            id: data.id,\r\n            perentList: this.listName,\r\n        }\r\n        const itemComponent = new TodoItem(itemData, this.updateListInfoInPerent.bind(this));\r\n        itemComponent.item.classList.add('in');\r\n        this.list.append(itemComponent.item);\r\n        setTimeout(() => itemComponent.item.classList.remove('in'), 350);\r\n    }\r\n\r\n    updateListInfoInPerent(itemData: IItemData) {\r\n        console.log(`Строка ${itemData.content} удалена из списка`);\r\n        this.updateItemsInMain(itemData);\r\n    }\r\n}\r\n\r\nexport { TodoList }","import { IItemData } from './data-item-intarface';\r\n\r\nconst toDo: IItemData[] = [\r\n    {\r\n        content: 'shopping',\r\n        id: 0,\r\n        perentList: 'toDo',\r\n    },\r\n    {\r\n        content: 'visit to petsvet',\r\n        id: 1,\r\n        perentList: 'toDo',\r\n    },\r\n    {\r\n        content: 'visit to the doctor',\r\n        id: 2,\r\n        perentList: 'toDo',\r\n    },\r\n];\r\n\r\nconst done: IItemData[] = [\r\n    {\r\n        content: 'going to the cinema',\r\n        id: 3,\r\n        perentList: 'Done',\r\n    },\r\n    {\r\n        content: 'omething else',\r\n        id: 4,\r\n        perentList: 'Done'\r\n    }\r\n];\r\n\r\nexport { toDo, done };","\"use strict\";\r\n\r\nimport './assets/style/style.scss';\r\nimport { TodoList } from './model/todo-list/todo-list';\r\nimport { toDo, done } from './data/lists-data';\r\nimport { LocalStorageService } from './service/localStorage';\r\nimport { IItemData } from './data/data-item-intarface';\r\nimport { ILocalStorgeKey } from './data/localstorge-key-interface';\r\n\r\nconst addDatatoLocalStorge = () => {\r\n    const localStorge = new LocalStorageService();\r\n    const toDoTitle = 'toDo';\r\n    const doneTitle = 'Done';\r\n    localStorge.setData(toDoTitle, toDo);\r\n    localStorge.setData(doneTitle, done);\r\n}\r\naddDatatoLocalStorge();\r\n\r\nclass PageModel {\r\n    public toDoTitle = 'toDo';\r\n    public doneTitle = 'Done';\r\n    public toDoList: TodoList;\r\n    public doneList: TodoList;\r\n\r\n    public body: HTMLElement;\r\n    public main: HTMLElement;\r\n    public wrapper: HTMLElement;\r\n\r\n    private _localStorge = new LocalStorageService();\r\n\r\n    constructor() {\r\n        this.body = document.querySelector('body');\r\n        this.main = document.createElement('main');\r\n        this.main.classList.add('page');\r\n        this.wrapper = document.createElement('div');\r\n        this.wrapper.classList.add('wrapper');\r\n        this.body.append(this.wrapper);\r\n        this.wrapper.append(this.main);\r\n\r\n        this.toDoList = new TodoList(this.main, this.toDoTitle, this.updateItemsInList.bind(this));\r\n        this.doneList = new TodoList(this.main, this.doneTitle, this.updateItemsInList.bind(this));\r\n    }\r\n\r\n    updateItemsInList(itemData: IItemData) {\r\n        const currentperentList = itemData.perentList;\r\n        const newPerent = this.changePerent(currentperentList);\r\n        const curretDataList = this._localStorge.getData(currentperentList);\r\n\r\n        const updateDataRemoveItem = curretDataList.filter(el => el.id !== itemData.id);\r\n        this._localStorge.setData(currentperentList, updateDataRemoveItem);\r\n\r\n        itemData.perentList = newPerent;\r\n        const updateDataAddItem = this._localStorge.getData(newPerent);\r\n        updateDataAddItem.push(itemData);\r\n        this._localStorge.setData(newPerent, updateDataAddItem);\r\n\r\n        if (currentperentList == \"toDo\") {\r\n            this.doneList.addItemInList(itemData);\r\n        }\r\n        if (currentperentList === 'Done') {\r\n            this.toDoList.addItemInList(itemData);\r\n        }\r\n    }\r\n\r\n    changePerent(perentList: string): string {\r\n        return perentList === 'toDo' ? 'Done' : 'toDo';\r\n    }\r\n}\r\n\r\nconst page = () => new PageModel();\r\n\r\nwindow.addEventListener('load', page);"],"names":["LocalStorageService","constructor","keys","setData","key","value","localStorage","setItem","JSON","stringify","removeItem","getData","data","getItem","parse","getAllKeys","this","map","name","TodoItem","updatePerentList","_localStorge","item","document","createElement","itemData","textContent","content","onClick","e","changeItemsPerentOnCkick","updatePerent","addEventListener","classList","add","setTimeout","destroy","removeEventListener","remove","TodoList","perentNode","listName","updateItemsBind","wrapper","title","list","append","todoData","updateItemsInMain","createtodoList","forEach","elData","itemComponent","updateListInfoInPerent","bind","addItemInList","id","perentList","console","log","toDo","done","localStorge","addDatatoLocalStorge","PageModel","toDoTitle","doneTitle","body","querySelector","main","toDoList","updateItemsInList","doneList","currentperentList","newPerent","changePerent","updateDataRemoveItem","filter","el","updateDataAddItem","push","window"],"sourceRoot":""}